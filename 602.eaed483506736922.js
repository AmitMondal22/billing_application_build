"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[602],{5602:(z,y,i)=>{i.r(y),i.d(y,{FormLayoutDemoModule:()=>w});var g=i(6814),a=i(95),f=i(2129),h=i(9862),m=i(5219),e=i(4769),F=i(8814),v=i(4104),_=i(7327),T=i(218),C=i(1532),I=i(707),Z=i(3714),A=i(7680),M=i(5167);const N=["itemInput"];function b(s,d){if(1&s){const l=e.EpF();e.TgZ(0,"div")(1,"label",34),e._uU(2),e.qZA(),e.TgZ(3,"div",35)(4,"input",36,37),e.NdJ("keyup",function(t){e.CHM(l);const n=e.oxw();return e.KtG(n.addItem(t))}),e.qZA(),e.TgZ(6,"p-button",38),e.NdJ("click",function(){const n=e.CHM(l).index,r=e.oxw();return e.KtG(r.removeSkill(n))}),e.qZA()()()}if(2&s){const l=d.index;e.xp6(1),e.MGl("for","skill",l,""),e.xp6(1),e.hij("Serial No ",l+1,":"),e.xp6(2),e.Q6J("formControlName",l)("autofocus",!0)}}function S(s,d){1&s&&(e.TgZ(0,"div",39),e._UZ(1,"p-progressSpinner"),e.qZA())}const c=function(){return{standalone:!0}};let k=(()=>{var s;class d{constructor(o,t,n,r,u,p){this.renderer=o,this.fb=t,this.http=n,this.messageService=r,this.confirmationService=u,this.api=p,this.filteredCountries=[],this.countries=[],this.selectedState=null,this.spinner=!1,this.states=[{name:"Arizona",code:"Arizona"},{name:"California",value:"California"},{name:"Florida",code:"Florida"},{name:"Ohio",code:"Ohio"},{name:"Washington",code:"Washington"}],this.dropdownItems=[{name:"Option 1",code:"Option 1"},{name:"Option 2",code:"Option 2"},{name:"Option 3",code:"Option 3"}],this.cities1=[],this.cities2=[],this.city1=null,this.city2=null,this.modelList=[],this.lastAddedIndex=-1,this.stockIn=this.fb.group({model_id:["",a.kI.required],purchase_rate:["",[a.kI.required]],purchase_by:["",[a.kI.required]],purchase_date:["",[a.kI.required]],warranty_expired:["",[a.kI.required]],cgst_p:["",[a.kI.required]],sgst_p:["",[a.kI.required]],sales_rate:["",[a.kI.required]],sels_warranty:["",[a.kI.required]],sl_no:this.fb.array([])})}ngOnInit(){this.ct=this.stockIn.controls,this.getDeviceModel(),this.addSkill()}resetData(){this.stockIn.reset(),this.selectedCountryAdvanced=[],this.company_n=null,this.product_n=null,this.warr_in_month=0;for(let o=0;o<=this.skillsFormArray.length;o++)this.skillsFormArray.removeAt(o)}getDeviceModel(){const o=this.api.baseUrl,t=localStorage.getItem("token"),n=(new h.WM).set("Authorization",`Bearer ${t}`);this.http.get(o+"/master/model_name",{headers:n}).subscribe(r=>{console.log(r),this.modelList=r,this.models=this.modelList.data},r=>{console.error(r)})}insertStockData(){this.spinner=!0;const o={model_id:this.modelID,purchase_rate:this.ct.purchase_rate.value,purchase_by:this.ct.purchase_by.value,purchase_date:this.formatedDate(this.ct.purchase_date.value),warranty_expired:this.formatedDate(this.ct.warranty_expired.value),cgst_p:this.ct.cgst_p.value,sgst_p:this.ct.sgst_p.value,serial_number:this.ct.sl_no.value,sales_rate:this.ct.sales_rate.value},t=this.api.baseUrl,n=localStorage.getItem("token"),r=(new h.WM).set("Authorization",`Bearer ${n}`);this.http.post(t+"/stock/in",o,{headers:r}).subscribe(u=>{console.log(u),u.status?(this.spinner=!1,this.messageService.add({severity:"success",summary:"Successful",detail:"New Stock Added",life:3e3}),this.resetData()):(this.spinner=!1,this.messageService.add({severity:"error",summary:"Error",detail:"Data Related Issue!!",life:3e3}))},u=>{console.error(u),this.spinner=!1,this.messageService.add({severity:"error",summary:"Error",detail:"From Server Side !!",life:3e3})})}filterCountry(o){const t=[],n=o.query;for(let r=0;r<this.models.length;r++){const u=this.models[r];0==u.model_name.toLowerCase().indexOf(n.toLowerCase())&&t.push(u)}this.filteredCountries=t}setWarranty(){this.warr_in_month=this.warr_in_month?this.warr_in_month:0;const o=new Date(this.ct.purchase_date.value);isNaN(o.getTime())?console.error("Invalid date input"):(o.setMonth(o.getMonth()+Number(this.warr_in_month)),this.stockIn.get("warranty_expired").setValue(o))}calculateOutputDate(){}selected(){console.log(this.selectedCountryAdvanced),this.modelID=this.selectedCountryAdvanced.model_id,this.product_n=this.selectedCountryAdvanced.product_name,this.company_n=this.selectedCountryAdvanced.company_name}get skillsFormArray(){return this.stockIn.get("sl_no")}addSkill(){this.skillsFormArray.push(this.fb.control(""))}removeSkill(o){this.skillsFormArray.removeAt(o)}addItem(o){13===o.keyCode&&(this.addSkill(),this.lastAddedIndex=this.skillsFormArray.length,this.lastAddedIndex=this.skillsFormArray.length-1)}formatedDate(o){const n=new Date(o),D=`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}-${String(n.getDate()).padStart(2,"0")}`;return console.log(D),D}}return(s=d).\u0275fac=function(o){return new(o||s)(e.Y36(e.Qsj),e.Y36(a.qu),e.Y36(h.eN),e.Y36(m.ez),e.Y36(m.YP),e.Y36(F.s))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],viewQuery:function(o,t){if(1&o&&e.Gf(N,5),2&o){let n;e.iGM(n=e.CRH())&&(t.itemInput=n.first)}},features:[e._Bn([m.ez,m.YP])],decls:72,vars:20,consts:[[1,"grid"],[1,"col-12"],[1,"card"],[3,"formGroup"],[1,"p-fluid","p-formgrid","grid"],[1,"field","col-12","md:col-4"],["htmlFor","firstname2"],["field","model_name",3,"ngModel","ngModelOptions","suggestions","dropdown","ngModelChange","onSelect","completeMethod"],["pInputText","","id","firstname2","type","text",3,"ngModel","ngModelOptions","ngModelChange"],["htmlFor","lastname2"],["pInputText","","id","lastname2","type","text",3,"ngModel","ngModelOptions","ngModelChange"],[1,"field","col-12","md:col-2"],["htmlFor","city"],["formControlName","purchase_by","locale","en-IN"],["mode","currency","formControlName","purchase_rate","inputId","currency-india","currency","INR","currencyDisplay","code","locale","en-IN"],[1,"p-input-icon-right"],["formControlName","purchase_date",3,"showButtonBar","onSelect"],[1,"pi","pi-calendar"],["inputId","percent",3,"ngModel","ngModelOptions","ngModelChange"],["formControlName","warranty_expired",3,"showButtonBar"],["formControlName","cgst_p","inputId","percent","prefix","%"],["formControlName","sgst_p","inputId","percent","prefix","%"],["formControlName","sales_rate","mode","currency","inputId","currency-india","currency","INR","currencyDisplay","code","locale","en-IN"],[1,"field","col-12","md:col-12"],[1,"formgroup-inline"],[1,"field","col-12","md:col-2",2,"margin-top","2%"],["styleClass","p-button-primary ","label","Add Item","icon","pi pi-plus",3,"click"],[1,"field","col-12","md:col-8"],[1,"field"],["formArrayName","sl_no"],[4,"ngFor","ngForOf"],["icon","pi pi-check","styleClass","p-button-primary ","label","Save",3,"disabled","click"],["icon","pi pi-refresh","styleClass","p-button-danger","label","Reset",3,"click"],["class","spinner_overlay",4,"ngIf"],[3,"for"],[1,"p-inputgroup"],["pInputText","","type","text","pAutoFocus","",3,"formControlName","autofocus","keyup"],["itemInput",""],["icon","pi pi-times","styleClass","p-button-danger",3,"click"],[1,"spinner_overlay"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h5"),e._uU(4,"Stock-In"),e.qZA(),e.TgZ(5,"form",3)(6,"div",4)(7,"div",5)(8,"label",6),e._uU(9,"Select model"),e.qZA(),e.TgZ(10,"p-autoComplete",7),e.NdJ("ngModelChange",function(r){return t.selectedCountryAdvanced=r})("onSelect",function(){return t.selected()})("completeMethod",function(r){return t.filterCountry(r)}),e.qZA()(),e.TgZ(11,"div",5)(12,"label",6),e._uU(13,"Product Name"),e.qZA(),e.TgZ(14,"input",8),e.NdJ("ngModelChange",function(r){return t.product_n=r}),e.qZA()(),e.TgZ(15,"div",5)(16,"label",9),e._uU(17,"Company Name"),e.qZA(),e.TgZ(18,"input",10),e.NdJ("ngModelChange",function(r){return t.company_n=r}),e.qZA()(),e.TgZ(19,"div",11)(20,"label",12),e._uU(21,"Purchase By"),e.qZA(),e._UZ(22,"p-inputNumber",13),e.qZA(),e.TgZ(23,"div",11)(24,"label",12),e._uU(25,"Purchase Price"),e.qZA(),e._UZ(26,"p-inputNumber",14),e.qZA(),e.TgZ(27,"div",11)(28,"label",12),e._uU(29,"Purchase Date"),e.qZA(),e.TgZ(30,"span",15)(31,"p-calendar",16),e.NdJ("onSelect",function(){return t.setWarranty()}),e.qZA(),e._UZ(32,"i",17),e.qZA()(),e.TgZ(33,"div",11)(34,"label",12),e._uU(35,"Waranty in Month"),e.qZA(),e.TgZ(36,"p-inputNumber",18),e.NdJ("ngModelChange",function(r){return t.warr_in_month=r})("ngModelChange",function(){return t.setWarranty()}),e.qZA()(),e.TgZ(37,"div",11)(38,"label",12),e._uU(39,"Warranty Expired"),e.qZA(),e.TgZ(40,"span",15),e._UZ(41,"p-calendar",19)(42,"i",17),e.qZA()(),e.TgZ(43,"div",11)(44,"label",12),e._uU(45,"CGST"),e.qZA(),e._UZ(46,"p-inputNumber",20),e.qZA(),e.TgZ(47,"div",11)(48,"label",12),e._uU(49,"SGST"),e.qZA(),e._UZ(50,"p-inputNumber",21),e.qZA(),e.TgZ(51,"div",11)(52,"label",12),e._uU(53,"Selling Price"),e.qZA(),e._UZ(54,"p-inputNumber",22),e.qZA(),e.TgZ(55,"div",23)(56,"div",2)(57,"h5"),e._uU(58,"Scan Barcode"),e.qZA(),e.TgZ(59,"div",24)(60,"div",25)(61,"p-button",26),e.NdJ("click",function(){return t.addSkill()}),e.qZA()(),e.TgZ(62,"div",27)(63,"div",28)(64,"div",29),e.YNc(65,b,7,4,"div",30),e.qZA()()()()()(),e.TgZ(66,"div",11)(67,"p-button",31),e.NdJ("click",function(){return t.insertStockData()}),e.qZA()(),e.TgZ(68,"div",11)(69,"p-button",32),e.NdJ("click",function(){return t.resetData()}),e.qZA()()()()()()(),e._UZ(70,"p-toast"),e.YNc(71,S,2,0,"div",33)),2&o&&(e.xp6(5),e.Q6J("formGroup",t.stockIn),e.xp6(5),e.Q6J("ngModel",t.selectedCountryAdvanced)("ngModelOptions",e.DdM(16,c))("suggestions",t.filteredCountries)("dropdown",!0),e.xp6(4),e.Q6J("ngModel",t.product_n)("ngModelOptions",e.DdM(17,c)),e.xp6(4),e.Q6J("ngModel",t.company_n)("ngModelOptions",e.DdM(18,c)),e.xp6(13),e.Q6J("showButtonBar",!0),e.xp6(5),e.Q6J("ngModel",t.warr_in_month)("ngModelOptions",e.DdM(19,c)),e.xp6(5),e.Q6J("showButtonBar",!0),e.xp6(24),e.Q6J("ngForOf",t.skillsFormArray.controls),e.xp6(2),e.Q6J("disabled",0==t.skillsFormArray.length),e.xp6(4),e.Q6J("ngIf",t.spinner))},dependencies:[v.FN,g.sg,g.O5,a._Y,a.Fj,a.JJ,a.JL,a.On,a.sg,a.u,a.CE,_.Qc,T.P,C.f,I.zx,Z.o,A.G,M.Rn],encapsulation:2}),d})(),L=(()=>{var s;class d{}return(s=d).\u0275fac=function(o){return new(o||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[f.Bz.forChild([{path:"",component:k}]),f.Bz]}),d})();var U=i(1480),J=i(3965),x=i(9663),O=i(8062),q=i(4055),B=i(6218),Q=i(5359);let w=(()=>{var s;class d{}return(s=d).\u0275fac=function(o){return new(o||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[m.ez,m.YP],imports:[v.EV,g.ez,a.u5,a.UX,L,_.WN,C._8,U.Gg,A.L,J.kW,x.zz,M.L$,O.XH,q.q4,B.A,Z.j,Q.x]}),d})()}}]);