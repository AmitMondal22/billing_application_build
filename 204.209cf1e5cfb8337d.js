"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[204],{3204:(G,d,o)=>{o.r(d),o.d(d,{ListDemoModule:()=>J});var m=o(6814),L=o(95),u=o(3557),g=o(9862),h=o(5118),p=o(5219),D=o(5903),t=o(4769),C=o(8814),f=o(981),v=o(4104),A=o(2947),Z=o(9232),y=o(3714),x=o(707),T=o(7680);const b=["view"];function U(e,l){if(1&e){const n=t.EpF();t.TgZ(0,"div",10)(1,"span",11),t._UZ(2,"i",12),t.TgZ(3,"input",13),t.NdJ("keyup",function(s){t.CHM(n);const a=t.oxw();return t.KtG(a.searchAll(s))}),t.qZA()()()}2&e&&(t.xp6(3),t.Q6J("autofocus",!0))}function M(e,l){1&e&&(t.TgZ(0,"tr")(1,"th"),t._uU(2,"Bill No"),t.qZA(),t.TgZ(3,"th"),t._uU(4,"Customer Name"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Mobile No"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Billing Date"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Total price"),t.qZA(),t.TgZ(11,"th",14),t._uU(12,"View full Details"),t.qZA()())}function N(e,l){if(1&e){const n=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.ALo(11,"currency"),t.qZA(),t.TgZ(12,"td",15)(13,"button",16),t.NdJ("click",function(){const a=t.CHM(n).$implicit,r=t.oxw();return t.KtG(r.show(a))}),t.qZA()()()}if(2&e){const n=l.$implicit;t.xp6(2),t.Oqu(n.billing_id),t.xp6(2),t.Oqu(n.name),t.xp6(2),t.Oqu(n.mobile_no),t.xp6(2),t.Oqu(n.billingdate),t.xp6(2),t.Oqu(t.xi3(11,5,n.total_price,"INR"))}}function S(e,l){1&e&&(t.TgZ(0,"div",17),t._UZ(1,"p-progressSpinner"),t.qZA())}const k=function(){return{"min-width":"50rem"}};let P=(()=>{var e;class l{constructor(i,s,a,r,c,F){this.api=i,this.productService=s,this.http=a,this.billID=r,this.dialogService=c,this.messageService=F,this.modelList=[],this.lastAddedIndex=-1,this.stockList=[],this.spinner=!1,this.first=0,this.rows=0}ngOnInit(){this.getAllBill()}onPageChange(i){this.first=i.first,this.rows=i.rows,this.goingPage=i.page+1,this.loadNewPage(this.goingPage)}loadNewPage(i){this.spinner=!0;const s=this.api.baseUrl,a=localStorage.getItem("token"),r=(new g.WM).set("Authorization",`Bearer ${a}`);this.http.get(s+"/report/my_bill?page="+i,{headers:r}).subscribe(c=>{this.spinner=!1,this.stockApi=c,this.stockList=this.stockApi.data})}getAllBill(){this.totalPGNO=0,this.spinner=!0;const i=this.api.baseUrl,s=localStorage.getItem("token"),a=(new g.WM).set("Authorization",`Bearer ${s}`);this.http.get(i+"/report/my_bill",{headers:a}).subscribe(r=>{this.spinner=!1,console.log(r),this.stockApi=r,this.stockList=this.stockApi.data,this.totalPGNO=this.stockApi.total,this.rows=this.stockApi.per_page},r=>{this.spinner=!1,console.error(r)})}searchAll(i){this.spinner=!0;const s=this.api.baseUrl,a=localStorage.getItem("token"),r=(new g.WM).set("Authorization",`Bearer ${a}`);this.http.get(s+"/report/my_bill?page=1&search="+i.target.value.toString(),{headers:r}).subscribe(c=>{this.spinner=!1,this.stockApi=c,this.stockList=this.stockApi.data,this.totalPGNO=this.stockApi.total})}show(i){this.billID.billing_id=0,this.billID.billing_id=i.billing_id,this.ref=this.dialogService.open(D.u,{header:"Full Billing Details",data:{id:i.billing_id},width:"70%",contentStyle:{overflow:"auto"},baseZIndex:1e4,maximizable:!0}),this.ref.onClose.subscribe(s=>{s&&this.messageService.add({severity:"info",summary:"Product Selected",detail:s.name})}),this.ref.onMaximize.subscribe(s=>{this.messageService.add({severity:"info",summary:"Maximized",detail:`maximized: ${s.maximized}`})})}ngOnDestroy(){this.ref&&this.ref.close()}}return(e=l).\u0275fac=function(i){return new(i||e)(t.Y36(C.s),t.Y36(f.M),t.Y36(g.eN),t.Y36(f.M),t.Y36(h.xA),t.Y36(p.ez))},e.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],viewQuery:function(i,s){if(1&i&&t.Gf(b,7),2&i){let a;t.iGM(a=t.CRH())&&(s.view=a.first)}},features:[t._Bn([h.xA,p.ez])],decls:11,vars:7,consts:[[1,"grid"],[1,"col-12",2,"max-height","600px","overflow","scroll"],[3,"value","tableStyle"],["dt2",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[1,"card","flex","justify-content-center"],[3,"first","rows","totalRecords","onPageChange"],["class","spinner_overlay",4,"ngIf"],[1,"flex"],[1,"p-input-icon-left","ml-auto"],[1,"pi","pi-search"],["pInputText","","pAutoFocus","","type","text","placeholder","Search keyword",3,"autofocus","keyup"],[2,"width","10rem"],[2,"text-align","center"],["type","button","pButton","","pRipple","","icon","pi pi-eye",3,"click"],[1,"spinner_overlay"]],template:function(i,s){1&i&&(t.TgZ(0,"div",0),t._UZ(1,"p-toast"),t.TgZ(2,"div",1)(3,"p-table",2,3),t.YNc(5,U,4,1,"ng-template",4),t.YNc(6,M,13,0,"ng-template",5),t.YNc(7,N,14,8,"ng-template",6),t.qZA(),t.TgZ(8,"div",7)(9,"p-paginator",8),t.NdJ("onPageChange",function(r){return s.onPageChange(r)}),t.qZA()()(),t.YNc(10,S,2,0,"div",9),t.qZA()),2&i&&(t.xp6(3),t.Q6J("value",s.stockList)("tableStyle",t.DdM(6,k)),t.xp6(6),t.Q6J("first",s.first)("rows",s.rows)("totalRecords",s.totalPGNO),t.xp6(1),t.Q6J("ngIf",s.spinner))},dependencies:[v.FN,p.jx,A.D,Z.iA,m.O5,y.o,x.Hq,T.G,m.H9],encapsulation:2}),l})(),z=(()=>{var e;class l{}return(e=l).\u0275fac=function(i){return new(i||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[u.Bz.forChild([{path:"",component:P}]),u.Bz]}),l})();var B=o(4037),I=o(8052),O=o(1825),w=o(3965),Y=o(6022);let J=(()=>{var e;class l{}return(e=l).\u0275fac=function(i){return new(i||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[p.ez,p.YP],imports:[v.EV,A.U,Z.U$,m.ez,L.u5,z,B.FI,I.f,O.C,y.j,w.kW,Y.Xt,x.hJ,T.L,h.DL]}),l})()}}]);